# **星闪无线通讯技术学习笔记**	
## 1. SLE AT 指令一览表

	AT+SLEENABLE SLE 使能
	AT+SLESETADVPAR 设置 SLE 广播参数
	AT+SLESETADVDATA 设置指令
	AT+SLESTARTADV 起 SLE 广播
	AT+SLESTOPADV 停 SLE 广播
	AT+SLESTARTSCAN 启动扫描
	AT+SLESTOPSCAN 关闭扫描
	AT+SLESETNAME 设置本端名称
	AT+SLEGETNAME 获取本端名称
	AT+SLESETADDR 设置本端地址

	AT+SLEGETADDR 获取本端地址
	AT+SLECONN 建立 SLE 连接
	AT+SLEDISCONN 断开 SLE 连接
	AT+SLESETPHY 设置 SLE PHY

	AT+SLEDEFAULTCON N 设置 SLE 默认连接参数
	AT+SLEPAIR 进行加密配对
	AT+SLEUNPAIR 移除加密配对
	AT+SLEGETPAIREDNU M获取配对设备数目
	AT+SLEGETPAIRDEV 获取配对设备
	AT+SLEGETPAIRSTA 获取配对状态
	AT+SLEGETBONDDEV 获取绑定设备状态
	AT+SLECONNPARUPD 星闪逻辑链路更新参数
	AT+SLEREADPEERRS SI读取对端 rssi
	AT+SSAPSADDSRV 注册服务端
	AT+SSAPSDELALLSRV 删除服务端
	AT+SSAPSADDSERV 添加服务
	AT+SSAPSSYNCADDS ERV 添加服务同步
	AT+SSAPSADDPRO
	PE RTY 添加属性
	AT+SSAPSSYNCADDP ROPERTY  添加属性同步
	AT+SSAPSADDDESCR 添加属性描述符
	AT+SSAPSSYNCADDD ESCR 添加属性描述符同步
	AT+SSAPSSTARTSERV    start servic	
	AT+SSAPSSNDNTFY 服务端向客户端发送通知
	AT+SSAPSNTFYBYUUI D服务端向客户端通过 uuid 发送通知
	AT+SSAPSSNDRESP 服务端向客户端发送响应
	AT+SSAPSREGCBK 服务端注册回调函数
	AT+SSAPCREGCBK 注册 SSAPC 回调函数
	AT+SSAPCFNDSTRU 发现 service
	AT+SSAPCWRITECMD 客户端向服务端写入数据
	AT+SSAPCWRITEREQ 客户端向服务端发送写请求
	AT+SSAPCEXCHINFO 客户端发起信息交换
	AT+SSAPCREADBYUU ID客户端通过 uuid 发送读请求
	AT+SSAPCREADREQ 客户端读取服务端属性数据
	AT+SLESETSCANPAR 设置扫描参数
	
## sle连接并发送数据操作示例
### 配置服务端，启动广播
	1. 选择一块开发板作为服务端，使用串口工具发送使能SLE指令（AT+SLEENABLE\n），返回值为OK,说明AT通信正常。
	指令描述：SLE使能 （enable:使能）响应：OK （AT通讯正常  
	
	2.发送注册服务端指令（AT+SSAPSADDSRV=0x1234\n），返回值为OK,说明AT通信正常
	设置指令：（AT+SSAPSADDSRV=）  ​ 指令描述：注册服务端 响应：OK（AT通讯正常）
	
	3.发送添加服务指令（AT+SSAPSADDSERV=0x2222,1\n），返回值为OK,说明AT通信正常。
	指令：SSAPSADDSERV=0x2222,1 设置指令：（AT+SSAPSADDSRV=,<is_primary>）指令描述：添加服务    响应：OK（AT通讯正常）
	
	4.发送添加属性指令（AT+SSAPSADDPROPERTY=1,0x2323,5,5,2,0x1234\n），返回值为OK,说明AT通信正常。
	指令：AT+SSAPSADDPROPERTY=1,0x2323,5,5,2,0x1234 (property:属性)
	设置指令：AT+SSAPSADDPROPERTY=<service_handle>,,,<operate_indication>,<value_len>,参数说明：<service_handle>：服务的handle： SSAP 特 征的UUID：特征权限 <operate_indication>： 操作指示<value_len>： 响应的数据长度 ：响应的数据 指令描述：添加属性 （property:属性)响应：OK（AT通讯正常）
	
	5.发送添加属性描述符指令（AT+SSAPSADDDESCR=1,2,0x3333,5,5,2,2,0x0200\n），返回值为OK,说明AT通信正常。
	设置指令：AT+SSAPSADDDESCR=<service_handle>,<property_handle>,,,<operate_indication>, ,<value_len>,
	指令：AT+SSAPSREGCBK （register:注册 callback:回调）指令描述：服务端注册回调函数响应：OK（AT通讯正常）
	
	6.发送注册SSAPS回调函数指令（AT+SSAPSREGCBK\n），返回值为OK,说明AT通信正常。
	指令：AT+SSAPSSTARTSERV （start service:开启服务）指令描述：开启服务 响应：OK（AT通讯正常）
	
	7.发送开启服务指令（AT+SSAPSSTARTSERV=1\n），返回值为OK,说明AT通信正常
	指令：AT+SSAPSSTARTSERV （start service:开启服务） 指令描述：开启服务 响应：OK（AT通讯正常）
	
	8.发送配置广播参数指令（AT+SLESETADVPAR=1,3,200,200,0,0x112233445588,0,0x112233445588\n），返回值为OK,说明AT通信正常。
	 设置指令：AT+SLESETADVPAR=<announce_handle>,<announce_mode>,<announce_interval_min>,<announce_interval_max>,<own_addr_type>,<own_addr_addr>,<peer_addr_type>,<peer_addr_addr>
	 
	9.发送配置广播数据指令（AT+SLESETADVDATA=1,10,4,aabbccddeeff11223344,11224455\n），返回回为OK,说明AT通信正常。
	AT+SLESETADVDATA=<adv_handle>,<announce_data_len>,<seek_rsp_data_len>,<announce_data>,<seek_rsp_data>
	
	10.发送开始广播指令（AT+SLESTARTADV=1\n），返回值为OK,说明AT通信正常。
	AT+SLESTARTADV=<adv_enable>
	
	
### 2. 配置客户端，启动扫描
	（1）选择一块开发板作为客户端，使用串口工具发送使能SLE指令AT+SLEENABLE\n），返回值为OK,说明AT通信正常
	AT+SLEENABLE （enable:使能）。
	（2）发送注册SSAPC回调函数指令（AT+SSAPCREGCBK\n），返回值为OK,说明AT通信正常。
	设置指令AT+SSAPCREGCBK
	（3）发送建立SLE连接指令（AT+SLECONN=0,112233445588\n），返回值为OK, 说明AT通信正常。
	设置指令：AT+SLECONN=<sle_addr_type>,<sle_addr>
	
###  3. 服务端与客户端通信
	（1）服务端向客户端发送通知（AT+SSAPSSNDNTFY=0,1,0,2,0xAA55\n），服务端返回值为OK,客户端打印出服务端发送的数据，说明AT通信正常。
	AT+SSAPSSNDNTFY=<conn_id>,,,<value_len>
	
	（2）客户端向服务端发送通知（AT+SSAPCWRITECMD=0,0,2,0,2,0x8899\n），
	客户端返回值为OK,服务端打印出客户端发送的数据，说明AT通信正常
	AT+SSAPPCWRITECMD=<client_id>,<conn_id>,,,,<write_data>
# AT指令学习笔记
1. AT指令分为测试指令、查询指令、设置指令、执行指令
   1. 测试指令用于查询设置指令的参数以及取值范围，AT+< cmd >=?
   2. 查询指令用于返回参数的当前值，AT+< cmd > ?
   3. 设置指令设置参数值或执行, AT+< cmd >=< parament >?
   4. 执行指令用于执行本指令的功能，AT+< cmd >=?
2. AT+HELP 查看当前可用AT指令
   1. 格式：AT+HELP
3. AT+MAC MAC 地址管理
   1. 格式:
      1. 设置命令：AT+MAC=< MAC >
      2. 查询命令：AT+MAC?
   2. 返回示例：AT+MAC=90：2B：D2：E4：CE：28，AT+MAC？
4. AT+IPERF 性能测试
   1. 格式：AT+IPERF=<-x>
   2. 参数说明：
      1. -s ：以 server模式启动
      2. -c,IP：以 client 模式启动， IP 为 server 端地址 
      3. -u：使用udp协议
      4. -i,sec：以秒为单位显示报告间隔
      5. -t,sec：测试时间，默认30s
      6. -b,Bandwidth：udp 发送带宽，单位为 bps，如设置为10K、 20M，默认值为 1Mbp
      7. -l,length：单次发送数据长度，单位为字节
      8. -B, IP：绑定一个主机 IP 地址，当主机有多个地址或接口时使 用该参数
      9. -p,portNum：指定服务器端使用的端口或客户端所连接的端口 
      10. -k：停止 iperf
   3. 示例：
      1. AT+IPERF=-s,-i,1：以 server 模式启动 iperf，使用协议默认为 tcp，显示报告以 1s 为间
   4. 注意事项：
      1. -c 或者-s须放在第一个参数位置。
      2. -s 使用时，须使用-k 结束才能进行下一次启动。
      3. -s 使用时，如果打流结束， iperf server 进程会自动关闭，再次测试需要重新起 server
      4. 仅支持一次执行，不支持多实例同时进行。
5. AT+SYSINFO 查看系统信息
   1. 格式：AT+SYSINFO 
   2. 显示：显示 SDK 版本号和系统当前所有任务详细信息，如任务 ID 、优先级、栈内存大小、调度状态等
6. AT+PING 测试 IPV4 网络连接
   1. 格式：AT+PING=[< -x >,]< IP >
   2. 示例：
      1. AT+PING= 192.168.3.1 ： 执 行 ping 192.168.3.1 ，默认ping4个包
      2. AT+PING=-w,1,192.168.3.1 ：执行 ping192.168.3.1 ，相邻两次ping 包的时间间隔为 1ms
      3. AT+PING=-l,100,192.168.3.1 ：执行 ping192.168.3.1 ，设置单次发送包长最大为 100Byte
7. AT+PING6 测试 IPV6 网络连接
   1. 格式：AT+PING6=[< -x >,]< IP >
   2. 示例：
      1. AT+PING6=2001: a : b : c : d : e : f : b
      2. AT+PING6=-c,100,2001: a : b : c : d : e : f : b
      3. AT+PING6=-k
8. AT+DNS 设置单板 dns 服务器地址
   1. 格式：
      1. 设置命令：AT+DNS=< dns_num >,< IP >
      2. 查询命令：AT+DNS?
   2. 示例：
      1. AT+ DNS?
      2. AT+DNS=1,192.168.3.1
      3. AT+DNS=2,192.168.3.2
9. AT+NETSTAT 查看网络状态
   1.  格式：AT+NETSTAT
   2.  参数说明：Send-Q：对 TCP 连接， 已发送但未确认的数据量； 对 UDP 连接，由于 IP 地址解析未完成而缓存的数据 
10. AT+DHCP dhcp 客户端命令
    1.  格式：AT+DHCP=< ifname >,< stat >
    2.  示例：AT+DHCP=wlan0,1
    3.  注意：网卡名称与 AT+IFCFG 查看的 STA 网卡名称保持一致
11. AT+DHCPS dhcps 服务器端命令
    1.  格式：AT+DHCPS=< ifname >,< stat >
    2.  示例：AT+DHCPS=ap0,1
    3.  注意：网卡名称与 AT+IFCFG 查看的 AP 网卡名称保持一致
12. AT+IFCFG 接口配置
    1.  格式：
        1.  设置指令：AT+IFCFG=< fname >,< IP >,netmask,< netmask >, gateway,< gateway >，AT+IFCFG=< ifname > [ ,< s wit > ] 
        2.  查询指令：AT+IFCFG
    2.  示例：AT+IFCFG=ap0, 192.168.3.1,netmask,255.255.255.0 ,gateway, 192.168.3.1 ：配置网卡 ap0 的 IP、子网掩 码、网关
13. AT+PS Wi-Fi 低功耗设置
    1.  格式：AT+PS=< switch >
    2.  示例：AT+PS=0
    3.  注意：低功耗命令，需要在 Wi-Fi 关联并获取 IP 之后下发，否 则有可能不生效。
14. AT+RST 复位单板
    1.  格式：执行命令 ：AT+RST
    2.  示例：AT+RST

# SLE学习笔记
1. SLE使能
   1. 指令：AT+SLEENABLE
   2. 功能：SLE 使能
   3. 参数
   4. 返回值：
2. 设置 SLE 广播参数
   1. 指令：AT+SLESETADVPAR
   2. 功能：设置 SLE 广播参数，要发送的信号
   3. 参数：
      1. < announce_handle >：设备公开句柄， 取值范围[0, 0x10] < announce_mode >：设备公开类型
      2. < announce_interval_min>  ： 最 小 设 备 公 开 周 期 , 0x000020~0xffffff, 单位 125u 
      3. < announce_interval_max > ：最大设备公开周期,0x000020~0xffffff, 单位 125u
      4. 0是公有地址，6是私有地址
      5. < own_addr_addr > ：SLE 本端设备
      6. < peer_addr_type > ：SLE 对端设备
      7. < peer_addr_addr > ：SLE 对端设备地址 
   4. 返回值：成功：OK，失败：ERROR
   5. 注意：此命令需在 SLE 使能 AT+SLEENABLE 后下发 
3. 设置指令
   1. 指令：AT+SLESETADVDATA
4. 起 SLE 广播
   1. 指令：AT+SLESTARTADV，AT+SLESTARTADV=< adv_enable >
   2. 功能：开启广播
   3. 参数:< adv_handle > ：adv handle, 取值范围[0, 0x10]
   4. 返回值：成功：OK，失败：ERROR
   5. 注意：此命令需在 SLE 使能 AT+SLEENABLE 后
5. 停 SLE 广播
   1. 指令：AT+SLESTOPADV，AT+SLESTOPADV=< adv_handle>
   2. 功能：停止广播
   3. 参数：< adv_handle > ：adv handle
   4. 返回值：成功：OK，失败：ERROR
6. 设置扫描参数
   1. 指令：AT+SLESETSCANPAR=< scan_type >,< scan_interval >,< scan_w indow >
   2. 功能：设置扫描信号的类型、间隔、窗口
   3. 参数:
      1. < scan_type > ：扫描类型。 0：被动扫描； 1：主动扫描
      2. < scan_interval >：扫描间隔。取值范围[0x14, 0xFFFF] ,单位 125 μs
      3. < scan_window >：扫描窗口。取值范围[0x14, 0xFFFF] ,单位 125 μs
   4. 返回值：成功：OK，失败：ERROR
   5. 注意：此命令需在 SLE 起广播 AT+SLESTARTSCAN 前下发
7. 启动扫描
   1. 指令：AT+SLESTARTSCAN
   2. 功能：关闭扫描
   3. 返回值：成功：OK，失败：ERROR
8. 关闭扫描
   1. 指令：AT+SLESTOPSCAN
   2. 功能：关闭扫描功能
   3. 返回值：成功：OK，失败：ERROR
9.  设置本端名称
       1. 指令：AT+SLESETNAME
       2. 功能：编辑本端设备名称
       3. 参数：< len >:name长度 < name > ：名字
       4. 示例：AT+SLESETNAME=7,SDKTEST
       5. 返回值：成功：OK，失败：ERROR
10. 获取本端名称
       1. 指令：AT+SLEGETNAME
       2. 示例：AT+SLEGETNAME
       3. 返回值：成功：OK，失败：ERROR
11. 设置本端地址
       1. 指令：AT+SLESETADDR
       2. 功能：设置一下本端设备地址
       3. 参数：< addr_type > ：地址，类型 < addr >：地址
       4. 示例：AT+SLESETADDR=0,0x000000000001
       5. 返回值：成功：OK，失败：ERROR
12. 获取本端地址
       1. 指令：AT+SLEGETADDR
       2. 示例：AT+SLEGETADDR
       3. 返回值：成功：OK，失败：ERROR
13. 建立 SLE 连接
       1. 指令：AT+SLECONN=< sle_addr_type >,< sle_addr >
       2. 示例：AT+SLECONN=0,000000000000
       3. 参数：
          1. < sle_addr_type >： SLE 设备地址类型 取值范围如下：0：公有地址；6：随机地址。
          2. < sle_addr > ：SLE 设备地址
       4. 返回值：连接成功后会打印[ connected ]字样以及对端设备地址与handle值，成功：OK，失败：ERROR
14. 星闪逻辑链路更新参数
       1. 指令：AT+SLECONNPARUPD=< conn_ id >,< interval_min >,< interval_ma x >,< max_latency >,< supervision_timeout >
       2. 示例：AT+SLECONNPARUPD=0,20,20,0,500
       3. 参数：
          1. < conn_id >：连接 ID
          2. < interval_min > ：链路调度最小间隔 ，取值范围[0x0002, 0x32000]，单位 125μs
          3. < interval_max > ：链路调度最大间隔 ，取值范围[0x0002, 0x32000]，单位 125μs
          4. < max_latency >：延迟周期，单位 slot（该值表示在设置值的周期内 可以不回复 , 为 0 时则表示每包都需回复）
          5. < supervision_timeout >：超时时间，单位 10ms
       4. 返回值：成功：OK，失败：ERROR
15. 星闪读取远端 rssi
       1. 指令：AT+ SLEREADPEERRSSI=< conn_ id>
       2. 参数：< conn_id >：连接 ID
       3. 返回值：成功：OK，失败：ERROR
16. 断开 SLE 连接
       1. 指令：AT+SLEDISCONN=< sle_addr_type >,< sle_addr >
       2. 示例：AT+SLEDISCONN=0,000000000000
       3. 参数：
          1. < sle_addr_type >：SLE 设备地址类型
          2. 0：公有地址
          3. 6：随机地址
          4. < sle_addr > ：SLE 设备地址。
       4. 返回值：成功：OK，失败：ERROR，连接成功后会打印[ disconnected ]字样以及对端设备地址与handle值
17. 设置 SLE PHY
       1. 指令：AT+SLESETPHY=< conn_id >,< tx_phy >,< rx_phy >
       2. 示例：AT+SLESETPHY=0,1,1
       3. 参数：
          1. < conn_id >：连接 id
          2. < tx_phy > ：tx phy 值，取值如下：
          3. 0： 1M PHY； 1 ：2M PHY ；2 ：4M
          4. PHY；< rx_phy > ：tx phy 值，取值如下：
          5. 0：1M PHY； 1 ：2M PHY ；2 ：4M PHY
       4. 返回值：成功：OK，失败：ERROR
18. 设置 SLE 默认连接参数
       1. 指令：AT+SLESETPHY=< enable_filter_policy >,< initiate_phys >,< gt_negotiate >,< scan_interval >,< scan_window >,< max_interval >,< mi n_interval >,< timeout >
       2. 示例：AT+SLEDEFAULTCONN=0,1,0x1,0x20,0x20,0x64,0x64,0x1FC
       3. 参数：
          1. < enable_filter_policy > ：是否打开链路过滤
          2. < initiate_phys >：链路扫描带宽
          3. < gt_negotiate >：链路建立时是否进行 G 和 T 交互
          4. < scan_interval > ： 扫描对端设备 的interval
          5. < scan_window >：扫描对端设备的 windows < max_interval > ： 链 路 最大调度 interval
          6. < min_interval >：链路最小调度 interval
          7. < timeout >：链路超时时间
       4. 返回值：成功：OK，失败：ERROR
19. 进行加密配对
       1. 指令：AT+SLEPAIR=< sle_addr_type >,< sle_addr >
       2. 示例：AT+SLEPAIR=0,000000000000
       3. 参数:
          1. < sle_addr_type >： SLE 设备地址类型 取值范围如下：
             1. 0：公有地址；
             2. 6：随机地址；
             3. < sle_addr > ：SLE 设备地址
       4. 返回值：成功：OK，失败：ERROR
       5. 注意：需在 sle 建立连接以后，和对端启动加密配对
20. 移除加密配对
       1. 指令：AT+SLEUNPAIR=< sle_addr_type >,< sle_addr >
       2. 示例：AT+SLEUNPAIR=0,000000000000
       3. 参数：< sle_addr_type >： SLE 设备地址类型 取值范围如下：
             1. 0：公有地址；
             2. 6：随机地址；
             3. < sle_addr > ：SLE 设备地址
       4. 返回值：成功：OK，失败：ERROR
21. 获取配对设备数目
       1. 指令：AT+SLEGETPAIREDNUM
       2. 示例： AT+SLEGETPAIREDNUM
       3. 返回值：成功：OK，失败：ERROR
22. 获取配对设备
       1. 指令：AT+SLEGETPAIRDEV
       2. 示例：AT+SLEGETPAIRDEV
       3. 返回值：成功：OK，失败：ERROR
23. 获取配对状态
       1. 指令：AT+SLEGETPAIRSTA=< sle_addr_type >,< sle_addr >
       2. 示例：AT+SLEUNPAIR=0,000000000000
       3. 参数：< sle_addr_type >： SLE 设备地址类型 取值范围如下：
             1. 0：公有地址；
             2. 6：随机地址；
             3. < sle_addr > ：SLE 设备地址
       4. 返回值：成功：OK，失败：ERROR
24. 获取绑定设备状态
       1. 指令：AT+SLEGETBONDDEV
       2. 示例：AT+SLEGETBONDDEV
       3. 返回值：成功：OK，失败：ERROR
25.  添加服务
        1. 指令：AT+SSAPSADDSERV=< uuid >,< is_primary >
        2. 示例：AT+SSAPSADDSERV=0x2222,1
        3. 返回值：成功：OK，失败：ERROR
26.  添加服务同步
        1. 指令：AT+SSAPSSYNCADDSERV=< uuid>,< is_primary>
        2. 示例：AT+SSAPSSYNCADDSERV=0x2222,1
        3. 返回值：成功：OK，失败：ERROR
27.  添加属性
        1. 指令：AT+SSAPSADDPROPERTY=< permis sions>,< operate_indication >,< value_len >,< value >
        2. 示例：AT+SSAPSADDPROPERTY=1,0x2323,5,5,2,0x1234
        3. 参数：
           1. < service_handle > ：服务的hadle < uuid > ：SSAP特征UUID
           2. < permissions >：特征权限
           3. < operate_indication > ： 操作指示< value_len >：响应的数据长度< value >：响应的数据
        4. 返回值：成功：OK，失败：ERROR
28.  添加属性同步
        1. 指令：AT+SSAPSSYNCADDPROPERTY=< service_handle >,< uuid>,< permissions >,< operate_indication >,< value_len >,< value >
        2. 示例：AT+SSAPSSYNCADDPROPERTY=1,0x2323,5,5,2,0x1234
        3. 参数：
           1. < service_handle > ：服务的hadle < uuid > ：SSAP特征UUID
           2. < permissions >：特征权限< operate_indication > ： 操作指示 < value_len >：响应的数据长度 < value >：响应的数据
        4. 返回值：成功：OK，失败：ERROR
29.  添加属性描述符
        1. 指令：AT+SSAPSADDDESCR=< service_handle >,< property_handle >,< uuid>,< permissions >,< operate_indication >,< type >,< value_len>,< value >
        2. 示例：AT+SSAPSADDDESCR=1,2,0x3333,5,5,2,2,0x0200
        3. 参数：
           1. < service_handle > ： 服 务handle < property_handle >：属性 handle < uuid > ：SSAP述符 UUID
           2. < permissions >：特征权限。
           3. < operate_indication > ： 操作指示 < type > ：描述符类型
           4. < value_len > ： 数 据 长度
           5. < value >：数据
        4. 返回值：成功：OK，失败：ERROR
30.  添加属性描述符同步
        1. 指令：AT+SSAPSSYNCADDDESCR=< service_handle>,< property_handle>,< uuid>,< permissions>,< operate_indication>,< type>,< value_● en>,< value>
        2. 示例：AT+SSAPSSYNCADDDESCR=1,2,0x3333,5,5,2,2,0x0200
        3. 参数：
           1. < service_handle > ： 服 务handle < property_handle >：属性 handle < uuid > ：SSAP述符 UUID
           2. < permissions >：特征权限。
           3. < operate_indication > ： 操作指示 < type > ：描述符类型
           4. < value_len > ： 数 据 长度
           5. < value >：数据
        4. 返回值：成功：OK，失败：ERROR
31.  start service
        1. 指令：AT+SSAPSSTARTSERV=< service_handle>
        2. 示例：AT+SSAPSSTARTSERV=1
        3. 参数：< service_handle>：服务 handle
        4. 返回值：成功：OK，失败：ERROR
32. 服务端向客户端发送通知
       1. 指令：AT+SSAPSNTFYBYUUID=< conn_id>,< uuid>,< start_hdl>, < end_h dl>,< type>,< value_len>,< value>
       2. 示例：AT+SSAPSNTFYBYUUID=0,0x1234,0,0xFFFF,0,0x0200
       3. 参数：
          1. < conn_id>：服务 handle
          2. < uuid>：属性 uuid
          3. < start_hdl> ： 开始句柄 
          4. < end_hdl>：结束句柄
          5. < type> ：SSAP 特征类型
             1. 特征值
             2. 属性说明描述符
             3. 客户端配置描述符
             4. 服务端配置描述符
             5. 格式描述符
             6. 服务管理保留描述符， 0x05–0x1F
             7. 0xFF：厂商自定义描述符 < value_len>：数据长度
             8. < value>：数据
       4. 返回值：成功：OK，失败：ERROR
33. 服务端向客户端通过 uuid 发送通知
       1. 指令：AT+SSAPSNTFYBYUUID=< conn_id>,< uuid>,< start_hdl>,< end_h dl>,< type>,< value_len>,< value>
       2. 示例：AT+SSAPSNTFYBYUUID=0,0x1234,0,0xFFFF,0,0x0200
       3. 参数:
          1. < conn_id>：服务 handle
          2. < uuid>：属性 uuid
          3. < start_hdl> ： 开始句柄 
          4. < end_hdl>：结束句柄
          5. < type> ：SSAP 特征类型
             1. 特征值
             2. 属性说明描述符
             3. 客户端配置描述符
             4. 服务端配置描述符
             5. 格式描述符
             6. 服务管理保留描述符， 0x05–0x1F
             7. 0xFF：厂商自定义描述符 < value_len>：数据长度
             8. < value>：数据
       4. 返回值：成功：OK，失败：ERROR
34. 服务端向客户端发送响应
       1. 指令：AT+SSAPSSNDRESP=< conn_id>,< request_id>,< status>,< v_aluelen>,< value>
       2. 示例：AT+SSAPSSNDRESP=0,0,0,2,0x0200
       3. 参数：
          1. < conn_id> ：服务handle
          2. < request_id>:请求 id
          3. < status>： 发送响应原因 
          4. < value_len> ：数据长度
          5. < value>：数据
       4. 返回值：成功：OK，失败：ERROR
35. 服务端注册回调函数
       1. 指令：AT+SSAPSREGCBK
       2. 示例：AT+SSAPSREGCBK
       3. 返回值：成功：OK，失败：ERROR
36. 注册 SSAPC 回调函数
       1. 指令：AT+SSAPCREGCBK
       2. 示例：AT+SSAPCREGCBK
       3. 返回值：成功：OK，失败：ERROR
37. 发现 service
       1. 指令：AT+SSAPCFNDSTRU=< client_id>,< conn_id>,< type>,< uuid>,< st art_hdl>,< end_hdl>
       2. 示例：AT+SSAPCFNDSTRU=0,0,1,0x1234,0,0xff
       3. 参数：
          1. < client_id> ：客户端 id < conn_id>：连接 id
          2. < type> ：查找类型，取值如下：
             1. 服务结构
             2. 首要服务
             3. 属性
       4. 返回值：成功：OK，失败：ERROR
38. 客户端向服务端写入数据
       1. 指令：AT+SSAPCWRITECMD=< client_id>,< conn_id>,< handle>,< type>, < len>,< write_data>
       2. 示例：AT+SSAPCWRITECMD=0,0,2,0,2,0x8899
       3. 参数：< client_id> ： 客 户端 id < conn_id>：连接id
       4. < handle>：连接 handle< type>：客户端类型, 取值：0/1/3 < len>：写入数据长度< write_data>：写入数据段
       5. 返回值：成功：OK，失败：ERROR
39. 客户端向服务端发送写请求
       1. 指令：AT+SSAPCWRITEREQ=< client_id>,< conn_id>,< handle>,< typ e>,< len>,< write_data>
       2. 示例：AT+SSAPCWRITEREQ=0,0,2,0,2,0x8899
       3. 参数：< handle>：连接 handle< type>：客户端类型, 取值：0/1/3 < len>：写入数据长度< write_data>：写入数据段
       4. 返回值：成功：OK，失败：ERROR
40. 客户端发起信息交换
       1. 指令：AT+SSAPCEXCHINFO=< lient_id>,< conn_id>,< mtu_size>,< ve rsion>
       2. 示例：AT+SSAPCEXCHINFO=0,0,251,1
       3. 参数：
          1. < client_id> ： 客 户端 id < conn_id>：连接 id
          2. < mtu_size> ：ssap 通道mtu < version>：版本号
       4. 返回值：成功：OK，失败：ERROR
41. 客户端通过 uuid 发送读请求
       1. 指令：AT+SSAPCREADBYUUID=< client_id>,< conn_id>,< uuid>,< type>,< start_hdl>,< end_hdl>
       2. 功能：
       3. 参数:
          1. < client_id> ： 客 户端 id < conn_id>：连接 id
          2. < handle>：连接 handle
          3. < type>：客户端类型, 取值：0/1/3 
          4. < start_hdl> ： 开 始handle
          5. < end_hd● > ：结束 handl
       4. 返回值：成功：OK，失败：ERROR
42. 客户端读取服务端属性数据
       1. 指令：AT+SSAPCREADREQ=< client_id>,< conn_id>,< handle>,< type>
       2. 示例：AT+SSAPCREADREQ=0,0,2,0
       3. 参数:
          1. < client_id>：客户端 id(预留参数) 
          2. < conn_id>：连接 id
          3. < handle>：连接 handle(连接成功后的回调里会打印) 
          4. < type> ：客户端类型，取值： 0/1/3
       4. 返回值：成功：OK，失败：ERROR
       5. 注意：读数据时的 handle 需与写入数据时的 handle 一致